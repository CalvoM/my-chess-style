upstream gunicorn {
    # docker will automatically resolve this to the correct address
    # because we use the same name as the service: "web"
    server django-web-backend:8000;
}
server {
 listen 80;
 server_name localhost;
 root /usr/share/nginx/html;
 index index.html index.htm;
  location ^~ /server/ {
      rewrite ^/server/(.*) /api/v1/$1 break;
      proxy_pass http://gunicorn;
      error_page 405   =200 $uri;
}
location / {
 try_files $uri $uri/ /index.html;
 }
}
